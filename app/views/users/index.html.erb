<% provide(:title, t("views.users.index.title")) %>
<h1><%= t "views.users.index.title" %></h1>

<table class="table">
  <thead>
    <tr>
      <th><%= Group.human_attribute_name(:members) %></th>
      <th><%= User.human_attribute_name(:avatar) %></th>
      <th><%= User.human_attribute_name(:name) %></th>
      <th><%= User.human_attribute_name(:code) %></th>
      <th><%= User.human_attribute_name(:email) %></th>
      <th><%= t("views.users.index.role") %></th>
      <th><%= User.human_attribute_name(:mentor) %></th>
      <th><%= User.human_attribute_name(:entered_at) %></th>
      <th><%= User.human_attribute_name(:created_at) %></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td class="middle" id=<%= "group-member-#{user.id}"%>><%= button_to current_user&.group&.member?(user).to_s, select_path_depend_on_member(user), method: select_method_depend_on_member(user), class: "btn btn-outline-success" %></td>
        <td><%= image_tag prepare_avatar(user), class: "avatar50" %></td>
        <td class="middle"><%= user.name %></td>
        <td class="middle"><%= user.code %></td>
        <td class="middle"><%= user.email %></td>
        <td class="middle" id=<%= "role-mentor-#{user.id}"%>><%= render "role_btn", user: user %></td>
        <td class="middle">
          <% user.groupings.each do |grouping| %>
            <%= content_tag(:span, grouping.group.user.name, class:".mentor") %>
          <% end %>
        </td>
        <td class="middle"><%= l(user.entered_at) %></td>
        <td class="middle"><%= l(user.created_at, format: :medium) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
