<% provide(:title, t("views.issues.index.title")) %>
<h1><%= t("views.issues.index.title") %></h1>
<%= render "search", q: @q, show_collapse: "show" %>

<nav class="nav nav-pills flex-column flex-sm-row">
  <%= sort_link @q, :title, class: "flex-sm-fill text-sm-center nav-link", id: "sort-issue-title", no_distinct: nil %>
  <%= sort_link @q, :user_name, class: "flex-sm-fill text-sm-center nav-link", id: "sort-issue-user", no_distinct: nil %>
  <%= sort_link @q, :favorite_count, Favorite.model_name.human, class: "flex-sm-fill text-sm-center nav-link", id: "sort-issue-favorite", no_distinct: true %>
  <%= sort_link @q, :stock_count, Stock.model_name.human, class: "flex-sm-fill text-sm-center nav-link", id: "sort-issue-stock", no_distinct: true %>
  <%= sort_link @q, :created_at, class: "flex-sm-fill text-sm-center nav-link", id: "sort-issue-created_at" %>
</nav>

<div class="issues-container">
  <div class="jscroll">
    <% issue_count = 0 %>
    <% @issues.each do |issue| %>
      <% if issue.accessible?(current_user) %>
        <% issue_count += 1 %>
        <%= render "issue", issue: issue %>
      <% end %>
    <% end %>
    <%= paginate @issues %>
  </div>
</div>
<% if issue_count.zero? %>
  <h3 class="red"><%= t("views.blank") %></h3>
<% end %>
